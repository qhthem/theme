import{r as e,o as t,c as l,a,w as n,b as s,d as o,F as u,e as r,f as d,g as c,h as p,i,t as h,n as m,j as v,k as f,l as g,m as b}from"./index-CC0zCF6g.js";const _=(e,t)=>{const l=e.__vccOpts||e;for(const[a,n]of t)l[a]=n;return l};const y=_({emits:["close"],props:{handle:{}},setup:(e,{emit:t})=>({onclink:()=>{t("close",{n:"step2",c:2})}})},[["render",function(r,d,c,p,i,h){const m=e("n-card"),v=e("n-scrollbar"),f=e("n-button");return t(),l(u,null,[a(v,null,{default:n((()=>[a(m,{bordered:!1},{default:n((()=>[s("p",null,"安装环境：PHP8.0+，推荐PHP8+，不支持PHP7以下版本。"),s("p",{style:{color:"red",margin:"5px 0"}},"为了使你正确并合法的使用本软件，请你在使用前务必阅读清楚下面的协议条款："),s("p",null,[s("strong",null,"一、本授权协议适用于 Astro内容管理系统所有版本，Astro内容管理系统 官方拥有对本授权协议的最终解释权。")]),s("br"),s("strong",null,"二、软件使用协议 "),s("p",null,"1、用户出于自愿而使用Astro，必须了解使用Astro的风险，Astro不承担任何因使用Astro而产生问题的相关责任。"),s("p",null,"2、通过使用Astro的网站中的任何内容（包括但不限于网页、文字、图片、音频、视频、图表、素材等）所引起的纠纷、争议及所涉及的法律责任由网站所有者自行承担，Astro不承担任何直接、间接或者连带的责任。 "),s("p",null,"3、Astro不对使用Astro构建的网站的任何信息内容以及导致的任何版权纠纷和法律争议及后果承担责任。"),s("p",null,"4、在任何情况下，对网站所有者及第三人可能造成的损失，Astro不承担任何直接、间接或者连带的责任。"),s("p",null,"5、任何由于黑客攻击、计算机病毒侵入或发作、因政府管制而造成的暂时性关闭等影响网络正常经营的不可抗力而造成的损失，Astro不承担任何直接、间接或者连带的责任。"),s("p",null,"6、在源码的使用过程中所造成的个人资料泄露及由此而导致的任何法律争议和后果，Astro不承担任何直接、间接或者连带的责任。"),s("br"),s("strong",null,"二、协议规定的约束和限制 "),s("p",null,"1、未经官方许可，不得对本软件或与之关联的商业授权进行出租、出售、抵押或发放子许可证。"),s("p",null,"2、未经官方许可，禁止在 Astro内容管理系统 的整体或任何部分基础上以发展任何派生版本、修改版本或第三方版本用于重新分发。"),s("p",null,"3、如果您未能遵守本协议的条款，您的授权将被终止，所被许可的权利将被收回，并承担相应法律责任。 "),s("br"),s("strong",null,"三、有限担保和免责声明 "),s("p",null,"1、本软件及所附带的文件是作为不提供任何明确的或隐含的赔偿或担保的形式提供的。 "),s("p",null,"2、用户出于自愿而使用本软件，您必须了解使用本软件的风险，在尚未购买产品技术服务之前，我们不承诺对免费用户提供任何形式的技术支持、使用担保，也不承担任何因使用本软件而产生问题的相关责任。 "),s("p",null,"3、电子文本形式的授权协议如同双方书面签署的协议一样，具有完全的和等同的法律效力。您一旦开始确认本协议并安装 Astro内容管理系统，即被视为完全理解并接受本协议的各项条款，在享有上述条款授予的权力的同时，受到相关的约束和限制。协议许可范围以外的行为，将直接违反本授权协议并构成侵权，我们有权随时终止授权，责令停止损害，并保留追究相关责任的权力。 "),s("p",null,"4、如果本软件带有其它软件的整合api示范例子包，这些文件版权不属于本软件官方，并且这些文件是没经过授权发布的，请参考相关软件的使用许可合法的使用。"),s("p",null,"版权所有 ©2024-2099，Astro 保留所有权利。 ")])),_:1})])),_:1}),s("div",{class:"buuton-center"},[a(f,{onClick:d[0]||(d[0]=e=>p.onclink()),type:"primary",class:"mt-10"},{default:n((()=>[o("我已阅读并同意")])),_:1})])],64)}]]);const k=_({emits:["close"],setup(e,{emit:t}){const l=r([]),a=r([1,2,3,4,5]),n=()=>{i({url:"/install/index/api.html",method:"POST",header:{"content-type":"application/json"},success:e=>{200==e.data.status&&(l.value=e.data.data,t("close",{e:e.data.err}))}})};return d((()=>{n()})),{ondata:n,list:l,num:a}}},[["render",function(o,r,d,i,m,v){const f=e("CircleCheckFilled"),g=e("n-icon"),b=e("CircleCloseFilled"),_=e("n-skeleton"),y=e("n-table"),k=e("n-scrollbar");return t(),c(k,null,{default:n((()=>[a(y,{bordered:!1,"single-line":!1},{default:n((()=>[s("thead",null,[s("tr",null,[s("th",null,"环境检测"),s("th",null,"推荐配置"),s("th",null,"当前状态"),s("th",null,"最低要求"),s("th",null,"是否合格")])]),i.list.length>0?(t(),l("tbody",{key:0},[(t(!0),l(u,null,p(i.list,(e=>(t(),l("tr",null,[s("td",null,h(e.laber),1),s("td",null,h(e.value),1),s("td",null,h(e.status),1),s("td",null,h(e.request),1),s("td",null,["未开启"!=e.status?(t(),c(g,{key:0,color:"#18a058"},{default:n((()=>[a(f)])),_:1})):(t(),c(g,{key:1,color:"#d03050"},{default:n((()=>[a(b)])),_:1}))])])))),256))])):(t(!0),l(u,{key:1},p(i.num,(e=>(t(),l("tbody",null,[s("td",null,[a(_,{height:"40px",repeat:1,sharp:!1})]),s("td",null,[a(_,{height:"40px",repeat:1,sharp:!1})]),s("td",null,[a(_,{height:"40px",repeat:1,sharp:!1})]),s("td",null,[a(_,{height:"40px",repeat:1,sharp:!1})]),s("td",null,[a(_,{height:"40px",repeat:1,sharp:!1})])])))),256))])),_:1})])),_:1})}]]);const x=_({props:{show:{default:!1},percentage:{default:0},title:{default:"获取中..."}},setup:(e,t)=>({bodyStyle:{width:"500px"},segmented:{content:"soft",footer:"soft"},showModal:e.show,close:()=>{t("close",!1)}})},[["render",function(l,s,o,u,r,d){const p=e("n-progress"),i=e("n-modal");return t(),c(i,{show:o.show,class:"custom-card",preset:"card",style:m(u.bodyStyle),title:o.title,size:"huge",bordered:!1,segmented:u.segmented,"on-mask-click":u.close},{default:n((()=>[a(p,{type:"line",percentage:o.percentage,"indicator-placement":"inside",status:"success",processing:""},null,8,["percentage"])])),_:1},8,["show","style","title","segmented","on-mask-click"])}],["__scopeId","data-v-685457fe"]]),{message:C,dialog:w,loadingBar:A}=v(["message","dialog","loadingBar"]);const P=_({components:{step1:y,step2:k,step3:_({emits:["close"],props:{handle:{}},components:{pro:x},setup(e,{emit:t}){const l=r(!1),a=r(null),n=r(null),s=r({dbhost:"127.0.0.1",dbport:"3306",dbprefix:"qh_"});f((()=>e.handle),((e,t)=>{u()}));const o=()=>{l.value=!0,i({url:"/install/index/progress",method:"POST",header:{"content-type":"application/json"}}).then((e=>{200==e.data.status&&(a.value=e.data.progress,n.value=e.data.title,100!==e.data.progress&&!1!==l.value&&setTimeout(o(),1e3))}))},u=()=>null==s.value.dbuser?(C.error("数据库用户名不能为空"),!1):null==s.value.dbpw?(C.error("数据库密码不能为空"),!1):null==s.value.dbname?(C.error("数据库名不能为空"),!1):(o(),void i({url:"/install/index/createdata.html",method:"POST",data:s.value,header:{"content-type":"application/json"},success:e=>{200==e.data.status?(a.value=0,l.value=!1,t("close",{s:!0,c:4,n:"step4"}),C.success(e.data.msg)):(l.value=!1,C.error(e.data.msg))}}));return{data:s,submit:u,model:l,progress:a,title:n,backup:o}}},[["render",function(s,o,r,d,c,p){const i=e("n-alert"),h=e("n-input"),m=e("n-form-item"),v=e("n-form"),f=e("n-card"),g=e("n-scrollbar"),b=e("pro");return t(),l(u,null,[a(g,null,{default:n((()=>[a(f,{bordered:!1},{default:n((()=>[a(i,{title:"数据库驱动类型只支持PDO",type:"info",bordered:!1}),a(v,{class:"mt-20"},{default:n((()=>[a(m,{label:"数据库服务器"},{default:n((()=>[a(h,{value:d.data.dbhost,"onUpdate:value":o[0]||(o[0]=e=>d.data.dbhost=e),placeholder:"数据库服务器地址，一般为127.0.0.1"},null,8,["value"])])),_:1}),a(m,{label:"数据库端口"},{default:n((()=>[a(h,{value:d.data.dbport,"onUpdate:value":o[1]||(o[1]=e=>d.data.dbport=e),placeholder:"数据库服务器端口，一般为3306"},null,8,["value"])])),_:1}),a(m,{label:"数据库用户名"},{default:n((()=>[a(h,{value:d.data.dbuser,"onUpdate:value":o[2]||(o[2]=e=>d.data.dbuser=e),placeholder:"请输入数据库用户名"},null,8,["value"])])),_:1}),a(m,{label:"数据库密码"},{default:n((()=>[a(h,{value:d.data.dbpw,"onUpdate:value":o[3]||(o[3]=e=>d.data.dbpw=e),placeholder:"请输入数据库密码"},null,8,["value"])])),_:1}),a(m,{label:"数据库名"},{default:n((()=>[a(h,{value:d.data.dbname,"onUpdate:value":o[4]||(o[4]=e=>d.data.dbname=e),placeholder:"请输入数据库名"},null,8,["value"])])),_:1}),a(m,{label:"数据库表前缀"},{default:n((()=>[a(h,{value:d.data.dbprefix,"onUpdate:value":o[5]||(o[5]=e=>d.data.dbprefix=e),placeholder:"如无特殊需要，请不要修改"},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1}),a(b,{show:d.model,title:d.title,percentage:d.progress,onClose:o[6]||(o[6]=e=>d.model=e)},null,8,["show","title","percentage"])],64)}]]),step4:_({setup:()=>({goToSomePath:()=>{window.location.href="/admin"}})},[["render",function(l,s,u,r,d,p){const i=e("n-button"),h=e("n-result");return t(),c(h,{status:"success",title:"安装成功",description:"\r\n\t  账户:admin 密码:123456 ,祝你使用愉快!!!",style:{"margin-top":"50px"}},{footer:n((()=>[a(i,{onClick:r.goToSomePath},{default:n((()=>[o("前往后台")])),_:1},8,["onClick"])])),_:1})}]])},setup(){const e=r(1),t=r("step1"),l=r(""),a=r(!1),n=r(0);return{c_name:t,currentStatus:r("process"),childRef:l,current:e,next(){null===e.value?e.value=1:e.value>=4?e.value=null:e.value++,t.value="step"+e.value},handleClose(l){const{n:s,c:o,s:u,e:r}=l;void 0!==s&&(t.value=s),void 0!==o&&(e.value=o),void 0!==u&&(a.value=u),void 0!==r&&(n.value=r)},prev(){0===e.value?e.value=null:null===e.value?e.value=4:e.value--,t.value="step"+e.value},handleCustomEvent:()=>{l.value=Math.floor(100*Math.random())},status:a,err:n,isnext:()=>1==e.value||(2==e.value&&0==n.value||3==e.value&&1==a.value)}}},[["render",function(r,d,p,i,m,v){const f=e("n-step"),_=e("n-steps"),y=e("n-space"),k=e("n-button"),x=e("n-button-group"),C=e("Back"),w=e("n-icon"),A=e("Right"),P=e("n-watermark");return t(),l(u,null,[s("div",{class:"mounted",id:"mounted"},[s("div",{class:"mounted-box"},[a(y,{vertical:"",class:"mounted-nav"},{default:n((()=>[a(_,{current:Number(i.current),status:i.currentStatus,size:"small"},{default:n((()=>[a(f,{title:"许可协议"}),a(f,{title:"环境检查"}),a(f,{title:"参数配置"}),a(f,{title:"安装完成"})])),_:1},8,["current","status"])])),_:1}),s("div",{class:"content-header mt-10"},[(t(),c(g(i.c_name),{onClose:i.handleClose,handle:i.childRef},null,40,["onClose","handle"]))]),1!=i.current?(t(),c(y,{key:0,class:"buuton-center mt-20"},{default:n((()=>[3==i.current&&0==i.status?(t(),c(x,{key:0},{default:n((()=>[a(k,{type:"primary",onClick:i.handleCustomEvent},{default:n((()=>[o(" 创建数据 ")])),_:1},8,["onClick"])])),_:1})):b("",!0),a(x,null,{default:n((()=>[a(k,{onClick:i.prev,type:0==i.err?"primary":"error",style:{"margin-right":"10px!important"}},{icon:n((()=>[a(w,null,{default:n((()=>[a(C)])),_:1})])),default:n((()=>[o(h(i.err>0?"返回上一步重新检查":"上一步")+" ",1)])),_:1},8,["onClick","type"]),i.isnext()?(t(),c(k,{key:0,onClick:i.next,type:"primary"},{icon:n((()=>[a(w,null,{default:n((()=>[a(A)])),_:1})])),default:n((()=>[o(" 下一步 ")])),_:1},8,["onClick"])):b("",!0)])),_:1})])),_:1})):b("",!0)]),s("footer",null," Copyright © 2023-2024 Astro主题管理系统版权所有 ")]),a(P,{image:"/static/images/logo.png",content:"大家艰苦一下，一切都会有的",cross:"",fullscreen:"","font-size":16,"line-height":16,width:384,height:384,"x-offset":12,"y-offset":60,rotate:-15,"image-opacity":.1})],64)}],["__scopeId","data-v-59997262"]]);export{P as default};
